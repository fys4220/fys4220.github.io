

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>2.3. Design units and structure &#8212; Real-time and embedded data systems</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'part-vhdl/vhdl_design_units';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.4. Design flow" href="vhdl_design_flow.html" />
    <link rel="prev" title="2.2. History" href="vhdl_history.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/fys4220_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/fys4220_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../part-information/information_agenda.html">Weekly agenda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part-information/information_content_overview.html">Content and learning objectives</a></li>

<li class="toctree-l1"><a class="reference internal" href="../part-information/information_tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part-information/information_download_tools.html">Quartus and ModelSim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part-information/information_prepare_git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">Other resources</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.uio.no/FYS4220-2023">Github organization page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.uio.no/orgs/FYS4220-2023/discussions">Discussion forum</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Main content</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../part-fpga/fpga.html">1. FPGA technology</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../part-fpga/pld_introduction.html">1.1. Programmable logic devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-fpga/fpga_introduction.html">1.2. Field Programmable Gate Arrays</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="vhdl.html">2. VHDL</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="vhdl_history.html">2.2. History</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.3. Design units and structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_design_flow.html">2.4. Design flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_objects_data_types.html">2.5. Objects and data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_operators.html">2.6. Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_concurrent_statements.html">2.7. Concurrent statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_description_models.html">2.8. Description styles</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_testbenches.html">2.9. Testbenches</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_process.html">2.10. VHDL Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_metastability.html">2.11. Metastability and synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_generics.html">2.12. Generic map</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_state_machines.html">2.13. State machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhdl_packages_subprograms.html">2.14. Packages and subprograms</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../part-embedded/embedded_intro.html">3. Embedded systems</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../part-embedded/embedded_nios2.html">3.1. Nios II CPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-embedded/embedded_softcore.html">3.2. Soft core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-embedded/embedded_memory_mapped.html">3.3. Memory mapped interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-embedded/embedded_hal.html">3.4. Hardware Abstraction Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-embedded/embedded_nios2_system_development.html">3.5. Nios II system development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-embedded/embedded_interrupt.html">3.6. Interrupt handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../part-rtos/rtos_intro.html">4. RTOS</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../part-rtos/rtos_ucosii.html">4.1. uC/OS-II</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-rtos/rtos_tasks.html">4.2. Scheduling and task management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-rtos/rtos_latency_jitter.html">4.3. Latency &amp; jitter</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../part-rtos/rtos_intertask_communication.html">4.4. Intertask communication</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../part-rtos/rtos_semaphores.html">4.4.1. Semaphores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part-rtos/rtos_priority_inversion.html">4.4.2. Priority inversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part-rtos/rtos_messages.html">4.4.3. Messages</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Exercises</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../part-exercises/exercises_intro.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../part-exercises/exercises_vhdl.html">VHDL</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_your_first_fpga_project.html">EX1: Your first FPGA project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_adder.html">EX2: Adder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_counter.html">EX3: 4-bit up-counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_state_machine.html">EX4: State machine</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../part-exercises/exercises_embedded.html">Embedded systems</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_nios2_example.html">EX5: A basic Nios II system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_memory_mapped_sw.html">EX6: Accessing Nios II memory mapped modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_nios2_interrupt.html">EX7: Nios II interrupt handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../part-exercises/exercises_rtos.html">RTOS</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_rtos_basic_example.html">EX8: A basic RTOS application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part-exercises/exercises_rtos_semaphores_example.html">EX9: Semaphore example</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../part-project/project_intro.html">Project overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part-project/project_uart.html">P1: UART controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part-project/project_nios2.html">P2: Microcontroller system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part-project/data_rate.html">P3: RTOS</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/part-vhdl/vhdl_design_units.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Design units and structure</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vhdl-as-a-model-of-digital-system">2.3.1. VHDL as a model of digital system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#entity-and-architecture">2.3.2. Entity and architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-basic-structure-of-a-vhdl-file">2.3.3. The basic structure of a VHDL File</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#library-and-packages">2.3.3.1. Library and packages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entity">2.3.3.2. Entity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">2.3.3.3. Architecture</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comments">2.3.4. Comments</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="design-units-and-structure">
<span id="vhdl-design-units"></span><h1><span class="section-number">2.3. </span>Design units and structure<a class="headerlink" href="#design-units-and-structure" title="Permalink to this heading">#</a></h1>
<div class="video-container">
<iframe width="1058" height="595" src="https://www.youtube.com/embed/-WT1XKdmkLQ" title="VHDL design units and structure" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<p><a class="reference external" href="https://www.uio.no/studier/emner/matnat/fys/FYS4220/h22/lecture-slides/vhdl_design_units_structure.pdf">[Slides]</a></p>
<p>Why should we use a Hardware Description Language (HDL)? Today the FPGA development tools may provide a possibility to draw and connect the logic building blocks by using a schematic editor through a graphical user interface like shown in <a class="reference internal" href="#quartus-schematic"><span class="std std-numref">Fig. 2.2</span></a>.</p>
<figure class="align-center" id="quartus-schematic">
<a class="reference internal image-reference" href="../_images/quartus_schematic.png"><img alt="../_images/quartus_schematic.png" src="../_images/quartus_schematic.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Quartus Prime Lite schematic editor.</span><a class="headerlink" href="#quartus-schematic" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>While this may seem intuative and provide a pleasing visual overview of your design, it comes with some disadvantages like lack of portability across platforms, lack of maintainability, and potentially a very complex diagram for large designs. The better solution is therefore to describe the design using a Hardware Description Languages (HDLs) like e.g. VHDL or Verilog. Using VHDL, the design in <a class="reference internal" href="#quartus-schematic"><span class="std std-numref">Fig. 2.2</span></a> can be described as shown below.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">library</span><span class="w"> </span><span class="nn">ieee</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="nn">ieee.std_logic_1164.</span><span class="k">all</span><span class="p">;</span>

<span class="c1">-- The entity describes the interface</span>
<span class="c1">-- between the outside and the internal</span>
<span class="c1">-- functionality.</span>
<span class="k">entity</span><span class="w"> </span><span class="nc">majority_voter</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">port</span><span class="p">(</span>
<span class="w">    </span><span class="n">A</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">B</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">C</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">Y</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">std_logic</span>
<span class="w">    </span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="nc">majority_voter</span><span class="p">;</span>

<span class="c1">-- The architecture describes the internal functionality</span>
<span class="k">architecture</span><span class="w"> </span><span class="nc">design</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">majority_voter</span><span class="w"> </span><span class="k">is</span>
<span class="k">begin</span>

<span class="c1">-- This is the main functionality.</span>
<span class="n">Y</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">B</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">C</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">C</span><span class="p">);</span>

<span class="k">end</span><span class="w"> </span><span class="k">architecture</span><span class="p">;</span>
</pre></div>
</div>
<p>The overhead in number of lines for this simple design may seem large.  However, the more complex the design, the smaller the relative overhead. The VHDL description above can be stored as a readable text format in a file with the extension <em>.vhd</em>. This comes with the added bonus that the file can be put under version control using e.g. Git. An essential and important practice when developing code based projects. In the following sections we will explain the basic structure of a VHDL file.</p>
<section id="vhdl-as-a-model-of-digital-system">
<h2><span class="section-number">2.3.1. </span>VHDL as a model of digital system<a class="headerlink" href="#vhdl-as-a-model-of-digital-system" title="Permalink to this heading">#</a></h2>
<p>VHDL can be looked at as a model of a digital system and provides a powerful alternative to schematic based design. A change (transition) on the input may lead to a new system state and consequently a change of the output after a given time delay. VHDL can be used to describe and simulate concurrent events.</p>
<figure class="align-center" id="vhdl-system">
<a class="reference internal image-reference" href="../_images/vhdlsystem.png"><img alt="../_images/vhdlsystem.png" src="../_images/vhdlsystem.png" style="width: 60%;" /></a>
</figure>
<div class="note admonition">
<p class="admonition-title">Some important remarks</p>
<p>VHDL is a HARDWARE DESCRIPTION LANGUAGE.</p>
<ul class="simple">
<li><p>A VHDL model is translated into <em>actual hardware</em> and mapped onto an FPGA. This is in contrast to other high level languages where the code is executed on predefined hardware like a processor. While code running on a processor is executed sequentially, a VHDL description mapped onto an FPGA is a physical implementation in, and of hardware resources – where multiple instances can be realized and operate concurrently. This opens for massive parallelization of functinality, one of the main advantages of FPGAs compared to standard CPUs.</p></li>
<li><p>When refering to the execution of a VHDL code, this means that the VHDL model is being simulated (e.g. by software running on a computer).</p></li>
</ul>
</div>
<p>At the top level, the structure of a VHDL design can be viewed as black-box approach, where the two main parts of any hierarchical design are the</p>
<ul class="simple">
<li><p>black box,</p></li>
<li><p>and the “stuff” that goes into the black box (e.g., other black boxes)</p></li>
</ul>
<figure class="align-center" id="vhdl-stuff">
<a class="reference internal image-reference" href="../_images/vhdl_stuff.png"><img alt="../_images/vhdl_stuff.png" src="../_images/vhdl_stuff.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.3 </span><span class="caption-text">Black box approach.</span><a class="headerlink" href="#vhdl-stuff" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="entity-and-architecture">
<h2><span class="section-number">2.3.2. </span>Entity and architecture<a class="headerlink" href="#entity-and-architecture" title="Permalink to this heading">#</a></h2>
<p>In VHDL the black box is referred to as the <em>entity</em> and the “stuff” that goes inside the entity is referred to as the <em>architecture</em> body of that <em>entity</em>.  An image that might help to visualize this concept is to consider a chip or chip package like the one shown in <a class="reference internal" href="#chip-entity"><span class="std std-numref">Fig. 2.4</span></a>. From the outside the chip can be view as a black box as its internal functionality is not directly visible.</p>
<figure class="align-center" id="chip-entity">
<a class="reference internal image-reference" href="../_images/vhdl_chip_entity.png"><img alt="../_images/vhdl_chip_entity.png" src="../_images/vhdl_chip_entity.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.4 </span><span class="caption-text">The entity describes the interface to the outside world and. E.g., the pins of a chip that can be used to connect to its inside functinality.
Image credit: Audrius Meskauskas, distributed under CC BY-SA 3.0, <a class="reference external" href="https://en.wikipedia.org/wiki/7400-series_integrated_circuits#/media/File:TexasInstruments_7400_chip,_view_and_element_placement.jpg">wikipedia</a>.</span><a class="headerlink" href="#chip-entity" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The pins of the chip provide a port or interface to the inside architecture of the chip as illustrated in <a class="reference internal" href="#chip-architecture"><span class="std std-numref">Fig. 2.5</span></a>.</p>
<figure class="align-center" id="chip-architecture">
<a class="reference internal image-reference" href="../_images/chip_architecture.png"><img alt="../_images/chip_architecture.png" src="../_images/chip_architecture.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.5 </span><span class="caption-text">The architecture describes the functionality of the circuit inside the entity (chip package).
Image credit: Audrius Meskauskas, distributed under CC BY-SA 3.0, <a class="reference external" href="https://en.wikipedia.org/wiki/7400-series_integrated_circuits#/media/File:TexasInstruments_7400_chip,_view_and_element_placement.jpg">wikipedia</a>.</span><a class="headerlink" href="#chip-architecture" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The entity and architecture approach enables the use of hierarchical structure (modularity) and the reuse of previously written code. A module is referred to by its inherently simple black box representation rather than by the details of its inside circuitry or functionality. The chip analogy works very well for a simple non-hierarchical design, where the entity describes the pins (their name and direction), and the architecture describes the functionality connected to these pins. However, for more complex designs, an hierarchical approach may be needed. An entity description is therefore not limited to describe the top level interface of a chip, but can also be used to describe the interface of internal modules of a chip or design, not connected directly to the pins of a chip.</p>
</section>
<section id="the-basic-structure-of-a-vhdl-file">
<h2><span class="section-number">2.3.3. </span>The basic structure of a VHDL File<a class="headerlink" href="#the-basic-structure-of-a-vhdl-file" title="Permalink to this heading">#</a></h2>
<p>The basic structure of a VHDL-file can be divided in three parts as shown in <a class="reference internal" href="#vhdl-file-structure"><span class="std std-numref">Fig. 2.6</span></a>:</p>
<figure class="align-center" id="vhdl-file-structure">
<a class="reference internal image-reference" href="../_images/vhdl_file_structure.png"><img alt="../_images/vhdl_file_structure.png" src="../_images/vhdl_file_structure.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.6 </span><span class="caption-text">The basic structure of a VHDL-file consist of a section where relevant libraries and packages are defined, the entity declaration, and the architecture description.</span><a class="headerlink" href="#vhdl-file-structure" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<section id="library-and-packages">
<h3><span class="section-number">2.3.3.1. </span>Library and packages<a class="headerlink" href="#library-and-packages" title="Permalink to this heading">#</a></h3>
<p>The <em>Library and package</em> part was already introduced in section <a class="reference internal" href="vhdl_history.html#vhdl-history"><span class="std std-numref">Section 2.2</span></a>, and is where you list or declare any packages that are needed to gain access to specific features of the VHDL language. Like the data type <em>std_logic</em> from the <em>std_logic_1164</em> of the IEEE library, which is one of the most commonly used types in VHDL.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">library</span><span class="w"> </span><span class="nn">IEEE</span><span class="p">;</span>
<span class="nn">IEEE.std_logic_1164</span><span class="p">.</span><span class="k">all</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="entity">
<h3><span class="section-number">2.3.3.2. </span>Entity<a class="headerlink" href="#entity" title="Permalink to this heading">#</a></h3>
<p>An entity declaration should start with the keyword <em>entity</em> and end with keyword <em>end</em>. The identifier in an entity declaration names the module  so that it can be referred to later. A port clause is then used to list and name each of the entity’s ports, which together form the interface of the entity.
Items enclosed by <em>&lt; &gt;</em> are mandatory items, while <em>[ ]</em> are optional.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>entity &lt;identifier&gt; is
  port(
    -- list of input and output ports
    -- with direction, and type:
    -- &lt;identifier&gt; : &lt;mode&gt; &lt;type&gt;
    );
end [entity] [identifier];
</pre></div>
</div>
<p>Each port has a type which specifies the kind of information that is communicated, and a mode which specifies how information flows into or out from the entity. The valid modes for an entity are listed in the table below and illustrated in <a class="reference internal" href="#vhdl-port-directions"><span class="std std-numref">Fig. 2.7</span></a>.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>In</p></td>
<td><p>Flow into the entity</p></td>
</tr>
<tr class="row-odd"><td><p>Out</p></td>
<td><p>Flow out of the entity (<em>no</em> feedback)</p></td>
</tr>
<tr class="row-even"><td><p>Buffer</p></td>
<td><p>Flow out of the entity (feedback allowed)</p></td>
</tr>
<tr class="row-odd"><td><p>Inout</p></td>
<td><p>for bi-directional signals</p></td>
</tr>
</tbody>
</table>
<figure class="align-center" id="vhdl-port-directions">
<a class="reference internal image-reference" href="../_images/vhdl_port_directions.png"><img alt="../_images/vhdl_port_directions.png" src="../_images/vhdl_port_directions.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.7 </span><span class="caption-text">Entity port modes.</span><a class="headerlink" href="#vhdl-port-directions" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="architecture">
<h3><span class="section-number">2.3.3.3. </span>Architecture<a class="headerlink" href="#architecture" title="Permalink to this heading">#</a></h3>
<p>While entity describes the interface or external representation of the circuit, the architecture describes what the circuit actually does – its internal functionality. An architecture body generally operates on values from the input ports, generating values to be assigned to output ports. An architecture needs to be connected to an entity, this achieved with the <code class="docutils literal notranslate"><span class="pre">&lt;entity_identifier&gt;</span></code> in the first line of the architcture declaration. Items enclosed by <em>&lt; &gt;</em> are mandatory items, while <em>[ ]</em> are optional.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span>architecture &lt;identifier&gt; of &lt;entity_identifier&gt; is
-- Declarative area
begin
-- Concurrent statement area
end [architecture] [identifier]
</pre></div>
</div>
<p>A complete example is shown below for the basic description of an <em>AND</em> gate. This VHDL description can be synthesized and programmed onto an FPGA. The only thing which is missing is to specify which physical pin of the FPGA that shall be connected to which port in the entity declaration. This must be specified by the user and provided to the synthesis tool before compilation.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">library</span><span class="w"> </span><span class="nn">IEEE</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="nn">IEEE.std_logic_1164.</span><span class="k">all</span><span class="p">;</span>

<span class="k">entity</span><span class="w"> </span><span class="nc">and_gate</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">port</span><span class="p">(</span>
<span class="w">    </span><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">B</span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">Y</span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">std_logic</span><span class="w"> </span><span class="c1">-- Notice: no semicolon on last item!</span>
<span class="w">    </span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nc">and_gate</span><span class="p">;</span>

<span class="k">architecture</span><span class="w"> </span><span class="nc">rtl</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">and_gate</span><span class="w"> </span><span class="k">is</span>

<span class="k">begin</span>

<span class="n">Y</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">B</span><span class="p">;</span>

<span class="k">end</span><span class="w"> </span><span class="k">architecture</span><span class="w"> </span><span class="nc">rtl</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="comments">
<h2><span class="section-number">2.3.4. </span>Comments<a class="headerlink" href="#comments" title="Permalink to this heading">#</a></h2>
<p>In VHDL, when a double dash (<code class="docutils literal notranslate"><span class="pre">--</span></code>) is used, any text to the right will be treated as a comment and will not be interpreted by the compiler. From VHDL-2008 it is also possible to comment out blocks using /* and */.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">architecture</span><span class="w"> </span><span class="nc">rtl</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">superduper_module</span><span class="w"> </span><span class="k">is</span>

<span class="c1">-- This is a comment</span>

<span class="k">begin</span>

<span class="c1">-- This is another comment</span>

<span class="o">/*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">block</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span>
<span class="k">Block</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">VHDL</span><span class="o">-</span><span class="mi">2008</span>
<span class="n">But</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">moment</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">highlighting</span><span class="w"> </span>
<span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">seem</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">this</span><span class="p">.</span>
<span class="o">*/</span>

<span class="k">end</span><span class="w"> </span><span class="nc">struct</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition-supplementary-suggested-reading admonition">
<p class="admonition-title">Supplementary suggested reading</p>
<p>Chapter 5, section 5.4  in LaMeres <span id="id1">[<a class="reference internal" href="../references.html#id10" title="Brock K. LaMeres. Introduction to Logic Circuits &amp; Logic Design with VHDL. Springer Cham, 2019.">LaM19</a>]</span>.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://link-springer-com.ezproxy.uio.no/chapter/10.1007/978-3-030-12489-2_5">Direct link html-version</a></p></li>
</ul>
<p><a class="reference download internal" download="" href="../_downloads/d65f452f259ef1a6ff0a4c680ba7d46b/free_range_vhdl.pdf"><code class="xref download docutils literal notranslate"><span class="pre">Chapter</span> <span class="pre">3</span> <span class="pre">in</span> <span class="pre">Mealy</span> <span class="pre">and</span> <span class="pre">Teppero,</span> <span class="pre">Free</span> <span class="pre">Range</span> <span class="pre">VHDL.</span></code></a></p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./part-vhdl"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="vhdl_history.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2.2. </span>History</p>
      </div>
    </a>
    <a class="right-next"
       href="vhdl_design_flow.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2.4. </span>Design flow</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vhdl-as-a-model-of-digital-system">2.3.1. VHDL as a model of digital system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#entity-and-architecture">2.3.2. Entity and architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-basic-structure-of-a-vhdl-file">2.3.3. The basic structure of a VHDL File</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#library-and-packages">2.3.3.1. Library and packages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entity">2.3.3.2. Entity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">2.3.3.3. Architecture</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comments">2.3.4. Comments</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Ketil Røed
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>